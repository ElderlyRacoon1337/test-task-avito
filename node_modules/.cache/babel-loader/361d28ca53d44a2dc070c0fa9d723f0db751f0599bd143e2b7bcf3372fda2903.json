{"ast":null,"code":"'use strict';\n\nvar _styled = _interopRequireDefault(require('@emotion/styled'));\nvar _react = require('react');\nvar _ThemeProvider = require('../../cutie-utils/ThemeProvider');\nvar _variables = require('../../variables');\nvar _jsxRuntime = require('@emotion/react/jsx-runtime');\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/** @jsxImportSource @emotion/react */\n\nconst StyledMenu = _styled.default.div`\n  position: absolute;\n  z-index: 10;\n  border-radius: ${props => props.variables.baseBorderRadius};\n  border: 1px solid ${props => props.variables.divider};\n  background-color: ${props => props.variables.backgroundBlur};\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  padding: 7px 0;\n  -webkit-backdrop-filter: blur(7px);\n  backdrop-filter: blur(7px);\n  -webkit-box-shadow: ${props => props.variables.baseBoxShadow};\n  box-shadow: ${props => props.variables.baseBoxShadow};\n  font-family: ${props => props.variables.baseFontFamily};\n  list-style: none;\n  font-size: ${props => props.variables.fontSizeMedium};\n  min-width: ${props => props.widthParent}px;\n  ${props => props.xpos !== 0 && props.ypos !== 0 ? `left: ${props.xpos}px;\n    top: ${props.ypos}px;` : 'opacity:0;'}\n  ${props => props.styleOverrides};\n`;\nfunction useWindowSize() {\n  const [size, setSize] = (0, _react.useState)([0, 0]);\n  (0, _react.useLayoutEffect)(() => {\n    function updateSize() {\n      setSize([window.innerWidth, window.innerHeight]);\n    }\n    window.addEventListener('resize', updateSize);\n    updateSize();\n    return () => window.removeEventListener('resize', updateSize);\n  }, []);\n  return size;\n}\nfunction ShowWindowDimensions() {\n  const [width, height] = useWindowSize();\n  return {\n    width,\n    height\n  };\n}\nconst Menu = ({\n  open,\n  anchorEl,\n  onClose,\n  children,\n  className,\n  sx,\n  fullWidth,\n  other,\n  disableScroll\n}) => {\n  const theme = (0, _react.useContext)(_ThemeProvider.ThemeContext);\n  let variables = theme.variables;\n  if (Object.keys(variables).length === 0) {\n    variables = _variables.initialVariables;\n  }\n  const menu = (0, _react.useRef)(null);\n  const [xpos, setXpos] = (0, _react.useState)(0);\n  const [ypos, setYpos] = (0, _react.useState)(0);\n  const [widthParent, setWidthParent] = (0, _react.useState)(0);\n  const prevent = ev => ev.preventDefault();\n  const styleOverrides = theme.styleOverrides.menu;\n  const windowSize = ShowWindowDimensions();\n  const getAnchorPosition = () => {\n    const div = document.createElement('div');\n    div.style.overflowY = 'scroll';\n    div.style.width = '50px';\n    div.style.height = '50px';\n    document.body.append(div);\n    const scrollWidth = div.offsetWidth - div.clientWidth;\n    div.remove();\n    if (anchorEl && menu.current) {\n      disableScroll && document.addEventListener('wheel', prevent, {\n        passive: false\n      });\n      const anchorPosition = anchorEl.getBoundingClientRect();\n      const menuPosition = menu.current.getBoundingClientRect();\n      fullWidth && setWidthParent(anchorPosition.width);\n      const rightOut = window.innerWidth - anchorPosition.left - menuPosition.width;\n      if (rightOut < 0) {\n        setXpos(anchorPosition.x - menuPosition.width + anchorPosition.width);\n      } else {\n        setXpos(anchorPosition.x);\n      }\n      const bottomOut = window.outerHeight - anchorPosition.top - menuPosition.height - menuPosition.height / 2 - 20;\n      if (bottomOut < 0) {\n        setYpos(anchorPosition.y + window.scrollY - menuPosition.height);\n      } else {\n        setYpos(anchorPosition.y + window.scrollY + anchorPosition.height);\n      }\n    }\n  };\n  (0, _react.useEffect)(() => {\n    getAnchorPosition();\n    return () => {\n      document.removeEventListener('wheel', prevent);\n      setXpos(0);\n      setYpos(0);\n    };\n  }, [anchorEl, menu.current, windowSize]);\n  (0, _react.useEffect)(() => {\n    function handleClickOutside(event) {\n      if (menu.current && anchorEl && !menu.current.contains(event.target) && !anchorEl.contains(event.target)) {\n        onClose();\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [menu.current]);\n  return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {\n    children: open && (0, _jsxRuntime.jsx)(StyledMenu, {\n      styleOverrides: styleOverrides,\n      widthParent: widthParent,\n      variables: variables,\n      xpos: xpos,\n      ypos: ypos,\n      ref: menu,\n      className: className,\n      onClick: e => e.stopPropagation(),\n      ...other,\n      css: sx,\n      children: children\n    })\n  });\n};\nmodule.exports = {\n  Menu\n};","map":{"version":3,"names":["_styled","_interopRequireDefault","require","_react","_ThemeProvider","_variables","_jsxRuntime","obj","__esModule","default","StyledMenu","div","props","variables","baseBorderRadius","divider","backgroundBlur","baseBoxShadow","baseFontFamily","fontSizeMedium","widthParent","xpos","ypos","styleOverrides","useWindowSize","size","setSize","useState","useLayoutEffect","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","ShowWindowDimensions","width","height","Menu","open","anchorEl","onClose","children","className","sx","fullWidth","other","disableScroll","theme","useContext","ThemeContext","Object","keys","length","initialVariables","menu","useRef","setXpos","setYpos","setWidthParent","prevent","ev","preventDefault","windowSize","getAnchorPosition","document","createElement","style","overflowY","body","append","scrollWidth","offsetWidth","clientWidth","remove","current","passive","anchorPosition","getBoundingClientRect","menuPosition","rightOut","left","x","bottomOut","outerHeight","top","y","scrollY","useEffect","handleClickOutside","event","contains","target","jsx","Fragment","ref","onClick","e","stopPropagation","css","module","exports"],"sources":["/Users/pavel/Desktop/test-task/node_modules/cutie-ui/cutie-components/Menu/index.js"],"sourcesContent":["'use strict';\n\nvar _styled = _interopRequireDefault(require('@emotion/styled'));\nvar _react = require('react');\nvar _ThemeProvider = require('../../cutie-utils/ThemeProvider');\nvar _variables = require('../../variables');\nvar _jsxRuntime = require('@emotion/react/jsx-runtime');\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n/** @jsxImportSource @emotion/react */\n\nconst StyledMenu = _styled.default.div`\n  position: absolute;\n  z-index: 10;\n  border-radius: ${(props) => props.variables.baseBorderRadius};\n  border: 1px solid ${(props) => props.variables.divider};\n  background-color: ${(props) => props.variables.backgroundBlur};\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  padding: 7px 0;\n  -webkit-backdrop-filter: blur(7px);\n  backdrop-filter: blur(7px);\n  -webkit-box-shadow: ${(props) => props.variables.baseBoxShadow};\n  box-shadow: ${(props) => props.variables.baseBoxShadow};\n  font-family: ${(props) => props.variables.baseFontFamily};\n  list-style: none;\n  font-size: ${(props) => props.variables.fontSizeMedium};\n  min-width: ${(props) => props.widthParent}px;\n  ${(props) =>\n    props.xpos !== 0 && props.ypos !== 0\n      ? `left: ${props.xpos}px;\n    top: ${props.ypos}px;`\n      : 'opacity:0;'}\n  ${(props) => props.styleOverrides};\n`;\nfunction useWindowSize() {\n  const [size, setSize] = (0, _react.useState)([0, 0]);\n  (0, _react.useLayoutEffect)(() => {\n    function updateSize() {\n      setSize([window.innerWidth, window.innerHeight]);\n    }\n    window.addEventListener('resize', updateSize);\n    updateSize();\n    return () => window.removeEventListener('resize', updateSize);\n  }, []);\n  return size;\n}\nfunction ShowWindowDimensions() {\n  const [width, height] = useWindowSize();\n  return {\n    width,\n    height,\n  };\n}\nconst Menu = ({\n  open,\n  anchorEl,\n  onClose,\n  children,\n  className,\n  sx,\n  fullWidth,\n  other,\n  disableScroll,\n}) => {\n  const theme = (0, _react.useContext)(_ThemeProvider.ThemeContext);\n  let variables = theme.variables;\n  if (Object.keys(variables).length === 0) {\n    variables = _variables.initialVariables;\n  }\n  const menu = (0, _react.useRef)(null);\n  const [xpos, setXpos] = (0, _react.useState)(0);\n  const [ypos, setYpos] = (0, _react.useState)(0);\n  const [widthParent, setWidthParent] = (0, _react.useState)(0);\n  const prevent = (ev) => ev.preventDefault();\n  const styleOverrides = theme.styleOverrides.menu;\n  const windowSize = ShowWindowDimensions();\n  const getAnchorPosition = () => {\n    const div = document.createElement('div');\n    div.style.overflowY = 'scroll';\n    div.style.width = '50px';\n    div.style.height = '50px';\n    document.body.append(div);\n    const scrollWidth = div.offsetWidth - div.clientWidth;\n    div.remove();\n    if (anchorEl && menu.current) {\n      disableScroll &&\n        document.addEventListener('wheel', prevent, {\n          passive: false,\n        });\n      const anchorPosition = anchorEl.getBoundingClientRect();\n      const menuPosition = menu.current.getBoundingClientRect();\n      fullWidth && setWidthParent(anchorPosition.width);\n      const rightOut =\n        window.innerWidth - anchorPosition.left - menuPosition.width;\n      if (rightOut < 0) {\n        setXpos(anchorPosition.x - menuPosition.width + anchorPosition.width);\n      } else {\n        setXpos(anchorPosition.x);\n      }\n      const bottomOut =\n        window.outerHeight -\n        anchorPosition.top -\n        menuPosition.height -\n        menuPosition.height / 2 -\n        20;\n      if (bottomOut < 0) {\n        setYpos(anchorPosition.y + window.scrollY - menuPosition.height);\n      } else {\n        setYpos(anchorPosition.y + window.scrollY + anchorPosition.height);\n      }\n    }\n  };\n  (0, _react.useEffect)(() => {\n    getAnchorPosition();\n    return () => {\n      document.removeEventListener('wheel', prevent);\n      setXpos(0);\n      setYpos(0);\n    };\n  }, [anchorEl, menu.current, windowSize]);\n  (0, _react.useEffect)(() => {\n    function handleClickOutside(event) {\n      if (\n        menu.current &&\n        anchorEl &&\n        !menu.current.contains(event.target) &&\n        !anchorEl.contains(event.target)\n      ) {\n        onClose();\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [menu.current]);\n  return (0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {\n    children:\n      open &&\n      (0, _jsxRuntime.jsx)(StyledMenu, {\n        styleOverrides: styleOverrides,\n        widthParent: widthParent,\n        variables: variables,\n        xpos: xpos,\n        ypos: ypos,\n        ref: menu,\n        className: className,\n        onClick: (e) => e.stopPropagation(),\n        ...other,\n        css: sx,\n        children: children,\n      }),\n  });\n};\nmodule.exports = {\n  Menu,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}